---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude-plugin/plugin.json
  - .claude-plugin/marketplace.json
  - CHANGELOG.md
  - README.md
autonomous: true
requirements:
  - DIST-01

must_haves:
  truths:
    - "User can install the plugin via /plugin marketplace add your-org/azure-devops-insights then /plugin install adi@azure-devops-insights"
    - "Plugin is named 'adi' and all skills appear with /adi: prefix after install"
    - "README documents the correct two-step install flow and full skill reference"
  artifacts:
    - path: ".claude-plugin/plugin.json"
      provides: "Plugin manifest — declares name 'adi', version, description, repository"
      contains: '"name": "adi"'
    - path: ".claude-plugin/marketplace.json"
      provides: "Marketplace descriptor — enables /plugin marketplace add flow"
      contains: '"plugins"'
    - path: "CHANGELOG.md"
      provides: "Version history starting at 1.0.0"
    - path: "README.md"
      provides: "Install instructions and skill reference"
      contains: "/plugin marketplace add"
  key_links:
    - from: ".claude-plugin/marketplace.json"
      to: ".claude-plugin/plugin.json"
      via: "plugin source reference pointing to repo root"
      pattern: '"source".*"github"'
    - from: "README.md"
      to: ".claude-plugin/marketplace.json"
      via: "documented install commands matching marketplace.json plugin name"
      pattern: "plugin marketplace add"
---

<objective>
Create the plugin scaffold: manifest, marketplace descriptor, changelog, and README. This establishes the installable identity of the `adi` plugin and the distribution mechanism required for DIST-01.

Purpose: Everything downstream (skills, scripts) lives inside this plugin structure. The marketplace.json enables the two-step install flow; the plugin.json declares the `adi` namespace that prefixes all skill commands.
Output: A valid Claude Code plugin repo structure with `adi` as the plugin name, installable via the documented two-step marketplace flow.
</objective>

<execution_context>
@C:/Users/7N_TSM/.claude/get-shit-done/workflows/execute-plan.md
@C:/Users/7N_TSM/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation/01-RESEARCH.md
@.planning/phases/01-foundation/01-CONTEXT.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Plugin manifest and marketplace descriptor</name>
  <files>
    .claude-plugin/plugin.json
    .claude-plugin/marketplace.json
  </files>
  <action>
Create `.claude-plugin/plugin.json` with the following exact content:

```json
{
  "name": "adi",
  "description": "AI-narrated Azure DevOps project health reports",
  "version": "1.0.0",
  "author": { "name": "your-org" },
  "repository": "https://github.com/your-org/azure-devops-insights",
  "license": "MIT"
}
```

The `name` field (`adi`) is the skill namespace — this is what makes commands appear as `/adi:setup`, `/adi:help`, etc. Do not change it.

Create `.claude-plugin/marketplace.json` with:

```json
{
  "name": "azure-devops-insights",
  "owner": { "name": "your-org" },
  "plugins": [
    {
      "name": "adi",
      "source": {
        "source": "github",
        "repo": "your-org/azure-devops-insights"
      },
      "description": "AI-narrated Azure DevOps project health reports",
      "version": "1.0.0"
    }
  ]
}
```

The `plugins[0].name` must match `plugin.json`'s `name` field exactly. This file is what `/plugin marketplace add your-org/azure-devops-insights` reads to discover available plugins.

Note: `your-org` is a placeholder — the actual GitHub org/username will be set when the repo is created. Using consistent placeholder throughout is fine for Phase 1.
  </action>
  <verify>
    <automated>node -e "const f=require('fs'); const p=JSON.parse(f.readFileSync('.claude-plugin/plugin.json','utf8')); const m=JSON.parse(f.readFileSync('.claude-plugin/marketplace.json','utf8')); console.assert(p.name==='adi','plugin name must be adi'); console.assert(m.plugins[0].name==='adi','marketplace plugin name must be adi'); console.assert(m.plugins[0].source.source==='github','source must be github'); console.log('OK: plugin.json name='+p.name+', marketplace plugins='+m.plugins.length)"</automated>
    <manual>Confirm .claude-plugin/ directory contains plugin.json and marketplace.json with correct name fields.</manual>
  </verify>
  <done>plugin.json has name "adi", marketplace.json lists one plugin named "adi" with github source pointing to your-org/azure-devops-insights.</done>
</task>

<task type="auto">
  <name>Task 2: README and CHANGELOG</name>
  <files>
    README.md
    CHANGELOG.md
  </files>
  <action>
Create `README.md` covering:
1. **What it is** — one paragraph: AI-narrated Azure DevOps reports as Claude Code slash commands
2. **Prerequisites** — Claude Code v1.0.33+, Azure DevOps account with PAT
3. **Install** — exact two-step flow (no shortcuts, no wrong commands):
   ```
   /plugin marketplace add your-org/azure-devops-insights
   /plugin install adi@azure-devops-insights
   ```
4. **Setup** — after install, run `/adi:setup` to configure
5. **Skills reference** — table or list of ALL Phase 1 skills:
   - `/adi:setup` — Configure org URL, project name, and PAT. Run this first.
   - `/adi:help` — List all available commands and their purpose.
   (Note: Later phases add `/adi:pr-metrics`, `/adi:contributors`, `/adi:bugs`, `/adi:sprint`, `/adi:summary`, `/adi:update` — include as "coming soon" or omit per Claude's discretion on README organization)
6. **Local development** — `claude --plugin-dir ./azure-devops-insights` for development without installing
7. **Privacy note** — config is stored in `~/.adi/config.json`; keep this file private

Do NOT document the `claude plugin add github:org/repo` shorthand — it does not exist in the current API and will confuse users.

Create `CHANGELOG.md` with:
```markdown
# Changelog

## [1.0.0] — Unreleased

### Added
- `/adi:setup` — Configure Azure DevOps connection (org URL, project name, PAT)
- `/adi:help` — List all available commands
- Azure DevOps API client with PAT validation and error classification
- Config manager storing credentials at `~/.adi/config.json`
```
  </action>
  <verify>
    <automated>node -e "const f=require('fs'); const r=f.readFileSync('README.md','utf8'); const c=f.readFileSync('CHANGELOG.md','utf8'); console.assert(r.includes('plugin marketplace add'),'README must use marketplace install'); console.assert(!r.includes('claude plugin add github'),'README must NOT use wrong install command'); console.assert(r.includes('/adi:setup'),'README must document /adi:setup'); console.assert(r.includes('/adi:help'),'README must document /adi:help'); console.assert(c.includes('1.0.0'),'CHANGELOG must have version 1.0.0'); console.log('OK')"</automated>
  </verify>
  <done>README.md documents correct two-step install flow, lists /adi:setup and /adi:help, includes privacy note. CHANGELOG.md has 1.0.0 unreleased entry listing Phase 1 skills.</done>
</task>

</tasks>

<verification>
- `.claude-plugin/plugin.json` has `"name": "adi"` and valid JSON
- `.claude-plugin/marketplace.json` has `"plugins"` array with one entry named `"adi"` pointing to github source
- `README.md` uses `/plugin marketplace add` and `/plugin install` — NOT `claude plugin add github:`
- `CHANGELOG.md` has unreleased 1.0.0 entry
- Run the automated verify command from Task 1 — all assertions pass
</verification>

<success_criteria>
Plugin repo structure is valid and installable:
1. `plugin.json` declares `adi` namespace
2. `marketplace.json` enables two-step marketplace install
3. README documents the real install flow — no wrong commands
4. CHANGELOG tracks Phase 1 additions
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md` documenting:
- Files created and their key content decisions
- The `your-org` placeholder note for when the repo is created
- Confirmation that plugin name is `adi` and marketplace install flow is documented
</output>
